(function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(m.length)m.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},s={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/local-rent-manager-fe/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},4230:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-navigation-drawer",{attrs:{color:e.color,"expand-on-hover":e.expandOnHover,"mini-variant":e.miniVariant,right:e.right,dark:"",app:"",permanent:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[e.isLoggedIn?n("v-list",{attrs:{dense:""}},[n("v-list-item",{attrs:{"two-line":"",to:{name:"userProfile"},link:""}},[n("v-list-item-avatar",[n("img",{attrs:{src:"https://randomuser.me/api/portraits/men/81.jpg"}})]),n("v-list-item-content",[n("v-list-item-title",[e._v("Local Rent Manager")]),n("v-list-item-subtitle",[e._v(e._s(e.user.firstName)+" "+e._s(e.user.lastName))])],1)],1),n("v-divider"),e._l(e.loggedInItems,(function(t){return n("v-list-item",{key:t.title,attrs:{to:t.path,link:""}},[n("v-list-item-action",[n("v-icon",[e._v(e._s(t.action))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)})),n("v-list-item",{on:{click:function(t){return t.preventDefault(),e.logoutUser(t)}}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-logout")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Logout")])],1)],1)],2):e._e(),e.isLoggedIn?e._e():n("v-list",{attrs:{dense:""}},[n("v-list-item",{attrs:{"two-line":""}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-key-star")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Local Rent Manager")])],1)],1),n("v-divider"),e._l(e.loggedOutItems,(function(t){return n("v-list-item",{key:t.title,attrs:{to:t.path,link:""}},[n("v-list-item-action",[n("v-icon",[e._v(e._s(t.action))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)}))],2)],1),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1)],1)},a=[],o=(n("a4d3"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("96cf"),n("1da1")),i=n("ade3"),c=n("2f62"),u=(n("99af"),n("bc3a")),l=n.n(u),d=l.a.create({baseURL:"https://lrm-api.herokuapp.com/",json:!0}),m={execute:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,r){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=localStorage.getItem("token")||"",e.abrupt("return",d({method:t,url:n,data:r,headers:{Authorization:s}}).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}(),getAll:function(e){return this.execute("get","/".concat(e,"/"))},get:function(e,t){return this.execute("get","/".concat(e,"/").concat(t))},delete:function(e,t){return this.execute("delete","/".concat(e,"/").concat(t))},create:function(e,t){return this.execute("post","/".concat(e,"/"),t)},update:function(e,t,n){return this.execute("put","/".concat(e,"/").concat(t),n)},login:function(e){return this.execute("post","/users/login",e)},register:function(e){return this.execute("post","/users/register",e)},getUserProfile:function(){return this.execute("get","/users/profile")},changeUserDetails:function(e,t){return this.execute("put","/users/".concat(e),t)},changePassword:function(e,t){return this.execute("put","/users/reset-password/".concat(e),t)}};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={data:function(){return{drawer:!0,loggedInItems:[{title:"Dashboard",action:"mdi-view-dashboard",path:{name:"home"}},{title:"Customers",action:"mdi-account",path:{name:"customersList"}},{title:"Houses",action:"mdi-home-variant-outline",path:{name:"housesList"}},{title:"Bookings",action:"mdi-account-card-details",path:{name:"bookingsList"}},{title:"Tasks",action:"mdi-clipboard-check-multiple-outline",path:{name:"tasksList"}},{title:"Works",action:"mdi-tools",path:{name:"worksList"}}],loggedOutItems:[{title:"Register",action:"mdi-account-plus",path:{name:"register"}},{title:"Login",action:"mdi-login",path:{name:"login"}},{title:"About",action:"mdi-information",path:{name:"about"}}],color:"primary",right:!1,miniVariant:!1,expandOnHover:!1,background:!1,user:{}}},computed:h({},Object(c["c"])(["isLoggedIn"])),created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getUserProfile();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:h({},Object(c["b"])(["logout"]),{logoutUser:function(){this.logout()},getUserProfile:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getUserProfile().then((function(e){t.user=e.user}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()})},f=p,k=n("2877"),g=n("6544"),b=n.n(g),w=n("7496"),y=n("a523"),_=n("a75b"),x=n("ce7e"),O=n("132d"),C=n("8860"),I=n("da13"),D=n("1800"),R=n("8270"),j=n("5d23"),T=n("f774"),V=Object(k["a"])(f,s,a,!1,null,null,null),S=V.exports;b()(V,{VApp:w["a"],VContainer:y["a"],VContent:_["a"],VDivider:x["a"],VIcon:O["a"],VList:C["a"],VListItem:I["a"],VListItemAction:D["a"],VListItemAvatar:R["a"],VListItemContent:j["a"],VListItemSubtitle:j["b"],VListItemTitle:j["c"],VNavigationDrawer:T["a"]});n("45fc");var N=n("8c4f"),B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-row",[n("v-carousel",{staticClass:"margin-side-10",attrs:{cycle:"",height:"350","hide-delimiter-background":"","show-arrows-on-hover":""}},e._l(e.totalData,(function(t){return n("v-carousel-item",{key:t.label},[n("v-sheet",{attrs:{color:t.color,height:"100%"}},[n("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[n("div",{staticClass:"display-1"},[n("p",{staticStyle:{"text-align":"center"}},[e._v(e._s(t.total))]),n("p",[e._v(e._s(t.label))])])])],1)],1)})),1)],1)],1),n("v-col",{attrs:{cols:"6"}},[n("v-row",[n("v-carousel",{staticClass:"margin-side-10",attrs:{cycle:"",height:"350","hide-delimiter-background":"","show-arrows-on-hover":""}},e._l(e.usersRankings,(function(t){return n("v-carousel-item",{key:t.key},[n("v-sheet",{attrs:{color:t.color,height:"100%"}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("div",{staticClass:"margin-vertical title"},[e._v("Top Users by "+e._s(t.label))])]),e._l(t.data,(function(r){return n("v-row",{key:r.username,attrs:{dense:""}},[n("v-col",{attrs:{align:"center",justify:"center",cols:"8"}},[e._v(" "+e._s(r.firstName)+" "+e._s(r.lastName)+" ")]),n("v-col",{attrs:{align:"center",justify:"center",cols:"4"}},[e._v(" "+e._s(r[t.key])+" ")])],1)}))],2)],1)})),1)],1)],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-row",[n("v-carousel",{staticClass:"margin-side-10",attrs:{cycle:"",height:"350","hide-delimiter-background":"","show-arrows-on-hover":""}},e._l(e.housesRankings,(function(t){return n("v-carousel-item",{key:t.key},[n("v-sheet",{attrs:{color:t.color,height:"100%"}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("div",{staticClass:"margin-vertical title"},[e._v("Top Houses by "+e._s(t.label))])]),e._l(t.data,(function(r){return n("v-row",{key:r.label,attrs:{dense:""}},[n("v-col",{attrs:{align:"center",justify:"center",cols:"8"}},[e._v(" "+e._s(r.label)+" ")]),n("v-col",{attrs:{align:"center",justify:"center",cols:"4"}},[e._v(" "+e._s(r[t.key])+" ")])],1)}))],2)],1)})),1)],1)],1),n("v-col",{attrs:{cols:"6"}},[n("v-row",[n("v-carousel",{staticClass:"margin-side-10",attrs:{cycle:"",height:"350","hide-delimiter-background":"","show-arrows-on-hover":""}},e._l(e.customersRankings,(function(t){return n("v-carousel-item",{key:t.label},[n("v-sheet",{attrs:{color:t.color,height:"100%"}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("div",{staticClass:"margin-vertical title"},[e._v(" Top Customers by "+e._s(t.label)+" ")])]),e._l(t.data,(function(r){return n("v-row",{key:r.name,attrs:{dense:""}},[n("v-col",{attrs:{align:"center",justify:"center",cols:"8"}},[e._v(" "+e._s(r.name)+" ")]),n("v-col",{attrs:{align:"center",justify:"center",cols:"4"}},[e._v(" "+e._s(r[t.key])+" ")])],1)}))],2)],1)})),1)],1)],1)],1)],1)},P=[],A=(n("7db0"),n("c740"),n("d81d"),n("13d5"),n("fb6a"),n("d3b7"),n("ddb0"),n("2909")),q=5,$=30,L=100,H={USERS:{tasks:"red",checkIns:"green",checkOuts:"red"},CUSTOMERS:{houses:"green",bookings:"red",tasks:"green",cost:"red"},HOUSES:{tasks:"red",bookings:"green",cost:"red"}},E={USERS:{tasks:"Tasks Completed",checkIns:"Check-in Completed",checkOuts:"Check-out Completed"},CUSTOMERS:{tasks:"Tasks",houses:"Houses",bookings:"Bookings",cost:"Costs"},HOUSES:{tasks:"Tasks",bookings:"Bookings",cost:"Costs"}};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t){return z(e,t).slice(0,q)}function z(e,t){return e.sort((function(e,n){return e[t]<n[t]?1:-1}))}function W(e,t){var n=J(e),r={tasks:z(n,"tasks").findIndex((function(e){return e._id===t}))+1,checkIns:z(n,"checkIns").findIndex((function(e){return e._id===t}))+1,checkOuts:z(n,"checkOuts").findIndex((function(e){return e._id===t}))+1};return r}function G(e){return{bronze:{tasks:Math.floor(e.tasks/$),checkIns:Math.floor(e.checkIns/$),checkOuts:Math.floor(e.checkOuts/$)},gold:{tasks:Math.floor(e.tasks/L),checkIns:Math.floor(e.checkIns/L),checkOuts:Math.floor(e.checkOuts/L)}}}function Z(e){var t=G(e.counters);return{tasks:{bronze:Object(A["a"])(Array(t.bronze.tasks).keys()),gold:Object(A["a"])(Array(t.gold.tasks).keys())},checkIns:{bronze:Object(A["a"])(Array(t.bronze.checkIns).keys()),gold:Object(A["a"])(Array(t.gold.checkIns).keys())},checkOuts:{bronze:Object(A["a"])(Array(t.bronze.checkOuts).keys()),gold:Object(A["a"])(Array(t.gold.checkOuts).keys())}}}function J(e){return e.map((function(e){return{_id:e._id,username:e.username,firstName:e.firstName,lastName:e.lastName,tasks:e.counters.tasks,checkIns:e.counters.checkIns,checkOuts:e.counters.checkOuts}}))}function K(e){var t=J(e);return{tasks:M(t,"tasks"),checkIns:M(t,"checkIns"),checkOuts:M(t,"checkOuts")}}function Q(e,t){return e.map((function(e){return{label:e.label,tasks:e.tasks.length,bookings:e.bookings.length,cost:e.tasks.reduce((function(e,n){var r=t.find((function(e){return e._id===n}));return r?e+r.cost:e}),0)}}))}function X(e,t){var n=Q(e,t);return{tasks:M(n,"tasks"),bookings:M(n,"bookings"),cost:M(n,"cost")}}function Y(e,t){return e.houses.reduce((function(e,n){var r=t.find((function(e){return e._id=n}));return r?(e.tasks+=r.tasks,e.bookings+=r.bookings,e.cost+=r.cost,e):e}),{tasks:0,bookings:0,cost:0})}function ee(e,t,n){var r=Q(t,n),s=e.map((function(e){return U({name:"".concat(e.firstName," ").concat(e.lastName),houses:e.houses.length},Y(e,r))}));return{houses:M(s,"houses"),bookings:M(s,"bookings"),tasks:M(s,"tasks"),cost:M(s,"cost")}}function te(e,t){return Object.keys(e).map((function(n){return{key:n,label:E[t][n],color:H[t][n],data:e[n]}}))}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se={data:function(){return{customers:[],houses:[],tasks:[],bookings:[],LABELS:{TOTAL_DATA:{customers:"Customers",houses:"Houses Managed",tasks:"Tasks",bookings:"Bookings"}},totalData:[{label:"Customers",total:0,color:"green"},{label:"Houses Managed",total:0,color:"red"},{label:"Tasks",total:0,color:"green"},{label:"Bookings",total:0,color:"red"}],housesRankings:[],usersRankings:[],customersRankings:[]}},computed:re({},Object(c["c"])(["user"])),created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getAllData(),this.buildUsersRankings(),this.buildHousesRankings(),this.buildCustomersRankings();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getAllData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("customers");case 2:return this.customers=e.sent,e.next=5,m.getAll("houses");case 5:return this.houses=e.sent,e.next=8,m.getAll("tasks");case 8:return this.tasks=e.sent,e.next=11,m.getAll("bookings");case 11:this.bookings=e.sent,this.totalData[0].total=this.customers.length,this.totalData[1].total=this.houses.length,this.totalData[2].total=this.tasks.length,this.totalData[3].total=this.bookings.length;case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),buildUsersRankings:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("users");case 2:t=e.sent,n=K(t),this.usersRankings=te(n,"USERS");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),buildHousesRankings:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("houses");case 2:return t=e.sent,e.next=5,m.getAll("tasks");case 5:n=e.sent,r=X(t,n),this.housesRankings=te(r,"HOUSES");case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),buildCustomersRankings:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("customers");case 2:return t=e.sent,e.next=5,m.getAll("houses");case 5:return n=e.sent,e.next=8,m.getAll("tasks");case 8:r=e.sent,s=ee(t,n,r),this.customersRankings=te(s,"CUSTOMERS");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},ae=se,oe=(n("cccb"),n("5e66")),ie=n("3e35"),ce=n("62ad"),ue=n("0fd9"),le=n("8dd9"),de=Object(k["a"])(ae,B,P,!1,null,null,null),me=de.exports;b()(de,{VCarousel:oe["a"],VCarouselItem:ie["a"],VCol:ce["a"],VRow:ue["a"],VSheet:le["a"]});var ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[n("v-row",[n("v-col",{attrs:{cols:"1"}},[n("v-avatar",[n("img",{attrs:{src:"https://randomuser.me/api/portraits/men/81.jpg"}})])],1),n("v-col",{attrs:{cols:"7"}},[n("span",{staticClass:"headline"},[e._v(e._s(e.user.firstName)+" "+e._s(e.user.lastName))])]),n("v-col",{attrs:{cols:"2"}},[n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},r),[e._v("Edit User")])]}}]),model:{value:e.userDetailsDialog,callback:function(t){e.userDetailsDialog=t},expression:"userDetailsDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Edit User")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"First Name",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.user.firstName,callback:function(t){e.$set(e.user,"firstName",t)},expression:"user.firstName"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Last Name",dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.user.lastName,callback:function(t){e.$set(e.user,"lastName",t)},expression:"user.lastName"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"E-mail",rules:[e.inputRules.email,e.inputRules.required],type:"email",dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Username",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeChangeDetails}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveDetails}},[e._v("Save")])],1)],1)],1)],1),n("v-col",{attrs:{cols:"2"}},[n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},r),[e._v("Change Password")])]}}]),model:{value:e.changePasswordDialog,callback:function(t){e.changePasswordDialog=t},expression:"changePasswordDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Change Password")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Password",rules:[e.inputRules.required],type:"password",dense:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Confirm Password",rules:[e.inputRules.required,e.inputRules.passwordMatch],type:"password",dense:""},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeChangePassword}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.savePassword}},[e._v("Save")])],1)],1)],1)],1)],1)],1),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"2"}},[n("strong",[e._v("Username: ")])]),n("v-col",{attrs:{cols:"10"}},[n("span",[e._v(e._s(e.user.username))])])],1),n("v-row",[n("v-col",{attrs:{cols:"2"}},[n("strong",[e._v("Email: ")])]),n("v-col",{attrs:{cols:"10"}},[n("span",[e._v(e._s(e.user.email))])])],1),n("v-row",[n("v-col",{attrs:{cols:"2"}},[n("strong",[e._v("Tasks Rank: ")])]),n("v-col",{attrs:{col:"10"}},[n("span",[e._v("#"+e._s(e.userRanks.tasks)+" ("+e._s(e.user.counters&&e.user.counters.tasks)+")")])])],1),n("v-row",[n("v-col",{attrs:{cols:"2"}},[n("strong",[e._v("Check-in Rank: ")])]),n("v-col",{attrs:{cols:"10"}},[n("span",[e._v("#"+e._s(e.userRanks.checkIns)+" ("+e._s(e.user.counters&&e.user.counters.checkIns)+")")])])],1),n("v-row",[n("v-col",{attrs:{cols:"2"}},[n("strong",[e._v("Check-out Rank: ")])]),n("v-col",{attrs:{cols:"10"}},[n("span",[e._v("#"+e._s(e.userRanks.checkOuts)+" ("+e._s(e.user.counters&&e.user.counters.checkOuts)+")")])])],1),n("v-row",[n("v-col",{attrs:{cols:"2"}},[n("strong",[e._v("Achievements")])])],1),n("v-row",[n("v-col",{attrs:{cols:"4"}},e._l(e.userBadges.tasks.bronze,(function(t){return n("v-chip",{key:t.number,staticClass:"ma-2",attrs:{color:"#CD7F32","text-color":"black"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[e._v("mdi-clipboard-check-multiple-outline")])],1),e._v(" 30 Tasks Completed "),n("v-avatar",{attrs:{right:""}},[n("v-icon",[e._v("mdi-medal")])],1)],1)})),1),n("v-col",{attrs:{cols:"4"}},e._l(e.userBadges.checkIns.bronze,(function(t){return n("v-chip",{key:t.number,staticClass:"ma-2",attrs:{color:"#CD7F32","text-color":"black"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[e._v("mdi-home-import-outline")])],1),e._v(" 30 Check-in Completed "),n("v-avatar",{attrs:{right:""}},[n("v-icon",[e._v("mdi-medal")])],1)],1)})),1),n("v-col",{attrs:{cols:"4"}},e._l(e.userBadges.checkOuts.bronze,(function(t){return n("v-chip",{key:t.number,staticClass:"ma-2",attrs:{color:"#CD7F32","text-color":"black"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[e._v("mdi-home-export-outline")])],1),e._v(" 30 Check-out Completed "),n("v-avatar",{attrs:{right:""}},[n("v-icon",[e._v("mdi-medal")])],1)],1)})),1)],1),n("v-row",[n("v-col",{attrs:{cols:"4"}},e._l(e.userBadges.tasks.gold,(function(t){return n("v-chip",{key:t.number,staticClass:"ma-2",attrs:{color:"#FFD700","text-color":"black"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[e._v("mdi-clipboard-check-multiple-outline")])],1),e._v(" 100 Tasks Completed "),n("v-avatar",{attrs:{right:""}},[n("v-icon",[e._v("mdi-seal")])],1)],1)})),1),n("v-col",{attrs:{cols:"4"}},e._l(e.userBadges.checkIns.gold,(function(t){return n("v-chip",{key:t.number,staticClass:"ma-2",attrs:{color:"#FFD700","text-color":"black"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[e._v("mdi-home-import-outline")])],1),e._v(" 100 Check-in Completed "),n("v-avatar",{attrs:{right:""}},[n("v-icon",[e._v("mdi-seal")])],1)],1)})),1),n("v-col",{attrs:{cols:"4"}},e._l(e.userBadges.checkOuts.gold,(function(t){return n("v-chip",{key:t.number,staticClass:"ma-2",attrs:{color:"#FFD700","text-color":"black"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",[e._v("mdi-home-export-outline")])],1),e._v(" 100 Check-out Completed "),n("v-avatar",{attrs:{right:""}},[n("v-icon",[e._v("mdi-seal")])],1)],1)})),1)],1)],1)],1)],1)],1)},he=[],pe={data:function(){var e=this;return{userDetailsDialog:!1,changePasswordDialog:!1,inputRules:{required:function(e){return!!e||"Required."},passwordMatch:function(t){return e.testPasswordMatch(t)||"Passwords do not match"},email:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Invalid e-mail."}},user:{},userRanks:{},userBadges:{tasks:{bronze:[],gold:[]},checkIns:{bronze:[],gold:[]},checkOuts:{bronze:[],gold:[]}},password:"",confirm_password:""}},watch:{dialog:function(e){e||this.close()}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getUserProfile(),this.setUserRanks(),this.gstUserBadges();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getUserProfile:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getUserProfile().then((function(e){t.user=e.user}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),setUserRanks:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("users");case 2:t=e.sent,this.userRanks=W(t,this.user._id);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setUserBadges:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getUserProfile().then((function(e){t.userBadges=Z(e.user)}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),testPasswordMatch:function(e){return this.password===e},saveDetails:function(){var e=this;m.changeUserDetails(this.user._id,{firstName:this.user.firstName,lastName:this.user.lastName,username:this.user.username,email:this.user.email}).then((function(){e.getUserProfile(),e.closeChangeDetails()}))},savePassword:function(){var e=this;m.changePassword(this.user._id,{password:this.password,confirm_password:this.confirm_password}).then((function(){e.closeChangePassword()}))},closeChangeDetails:function(){this.userDetailsDialog=!1},closeChangePassword:function(){this.changePasswordDialog=!1}}},fe=pe,ke=n("8212"),ge=n("8336"),be=n("b0af"),we=n("99d9"),ye=n("cc20"),_e=n("169a"),xe=n("2fa4"),Oe=n("8654"),Ce=Object(k["a"])(fe,ve,he,!1,null,null,null),Ie=Ce.exports;b()(Ce,{VAvatar:ke["a"],VBtn:ge["a"],VCard:be["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VChip:ye["a"],VCol:ce["a"],VContainer:y["a"],VDialog:_e["a"],VIcon:O["a"],VRow:ue["a"],VSpacer:xe["a"],VTextField:Oe["a"]});var De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Login")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Username",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Password",rules:[e.inputRules.required],type:"password",dense:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.loginUser}},[e._v("Login")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.redirectToRegister}},[e._v("Need an account?")])],1)],1)],1)},Re=[];function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve={data:function(){return{username:"",password:"",inputRules:{required:function(e){return!!e||"Required."}}}},methods:Te({},Object(c["b"])(["login"]),{loginUser:function(){var e=this,t={username:this.username,password:this.password};this.login(t).then((function(t){t.success&&e.$router.push({name:"home"})})).catch((function(e){return e}))},redirectToRegister:function(){this.$router.push({name:"register"})}})},Se=Ve,Ne=Object(k["a"])(Se,De,Re,!1,null,null,null),Be=Ne.exports;b()(Ne,{VBtn:ge["a"],VCard:be["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VCol:ce["a"],VContainer:y["a"],VRow:ue["a"],VSpacer:xe["a"],VTextField:Oe["a"]});var Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Register")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"First Name",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Last Name",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"E-mail",rules:[e.inputRules.email,e.inputRules.required],type:"email",dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Username",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Password",rules:[e.inputRules.required],type:"password",dense:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Confirm Password",rules:[e.inputRules.required,e.inputRules.passwordMatch],type:"password",dense:""},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.registerUser}},[e._v("Register")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.redirectToLogin}},[e._v("Already have an account?")])],1)],1)],1)},Ae=[];function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le={data:function(){var e=this;return{firstName:"",lastName:"",username:"",email:"",password:"",confirm_password:"",inputRules:{required:function(e){return!!e||"Required."},passwordMatch:function(t){return e.testPasswordMatch(t)||"Passwords do not match"},email:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Invalid e-mail."}}}},methods:$e({},Object(c["b"])(["register"]),{registerUser:function(){var e=this,t={username:this.username,password:this.password,confirm_password:this.confirm_password,email:this.email,firstName:this.firstName,lastName:this.lastName};this.register(t).then((function(t){t.success&&e.$router.push({name:"login"})}))},redirectToLogin:function(){this.$router.push({name:"login"})},testPasswordMatch:function(e){return this.password===e}})},He=Le,Ee=Object(k["a"])(He,Pe,Ae,!1,null,null,null),Fe=Ee.exports;b()(Ee,{VBtn:ge["a"],VCard:be["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VCol:ce["a"],VContainer:y["a"],VRow:ue["a"],VSpacer:xe["a"],VTextField:Oe["a"]});var Ue=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Me=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("About")]),n("p",[e._v("This web app is an academic project for ESMAD - IPP")]),n("p",[e._v(" It was develop to explore and prove some Web Development knowledge in the context of the Distributed Systems class ")])])}],ze={},We=ze,Ge=Object(k["a"])(We,Ue,Me,!1,null,null,null),Ze=Ge.exports,Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-data-table",{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.customers,search:e.search,"sort-by":"firstName"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Customers List")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},r),[e._v("New Customer")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"First Name",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.editedItem.firstName,callback:function(t){e.$set(e.editedItem,"firstName",t)},expression:"editedItem.firstName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Last Name",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.editedItem.lastName,callback:function(t){e.$set(e.editedItem,"lastName",t)},expression:"editedItem.lastName"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.open(r)}}},[e._v(" "+e._s(e.actions.open)+" ")]),n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editCustomer(r)}}},[e._v(" "+e._s(e.actions.edit)+" ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteCustomer(r)}}},[e._v(" "+e._s(e.actions.delete)+" ")])]}}])})],1)},Ke=[],Qe={data:function(){return{dialog:!1,search:"",inputRules:{required:function(e){return!!e||"Required."}},headers:[{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Actions",value:"action",sortable:!1}],customers:[],editedItem:{firstName:"",lastName:""},defaultItem:{firstName:"",lastName:""},actions:{open:"mdi-open-in-app",edit:"mdi-pencil",delete:"mdi-delete"}}},computed:{formTitle:function(){return this.editedItem._id?"Edit Customer":"New Customer"}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getCustomers();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getCustomers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("customers");case 2:this.customers=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),open:function(e){this.$router.push({name:"customer",params:{customerId:e._id}})},editCustomer:function(e){this.editedItem=Object.assign({},e),this.dialog=!0},deleteCustomer:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ".concat(t.firstName," ").concat(t.lastName,"?"))){e.next=3;break}return e.next=3,m.delete("customers",t._id).then((function(){n.getCustomers()}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem)}),300)},save:function(){var e=this;this.editedItem._id?m.update("customers",this.editedItem._id,this.editedItem).then((function(){e.getCustomers(),e.close()})):m.create("customers",this.editedItem).then((function(){e.getCustomers(),e.close()}))}}},Xe=Qe,Ye=n("8fea"),et=n("71d9"),tt=n("2a7f"),nt=Object(k["a"])(Xe,Je,Ke,!1,null,null,null),rt=nt.exports;b()(nt,{VBtn:ge["a"],VCard:be["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VCol:ce["a"],VContainer:y["a"],VDataTable:Ye["a"],VDialog:_e["a"],VIcon:O["a"],VRow:ue["a"],VSpacer:xe["a"],VTextField:Oe["a"],VToolbar:et["a"],VToolbarTitle:tt["a"]});var st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.customer.lastName)+", "+e._s(e.customer.firstName))]),n("h3",[e._v("Houses: "+e._s(e.customer.houses&&e.customer.houses.length))]),n("h3",[e._v("Bookings: "+e._s(e.customer.numberOfBookings&&e.customer.numberOfBookings))]),n("h3",[e._v("Tasks: "+e._s(e.customer.numberOfTasks&&e.customer.numberOfTasks))]),n("h3",[e._v("Total Cost: "+e._s(e.customer.totalCost))]),n("v-data-table",{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.customer.houses,search:e.search,"sort-by":"label"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Customer Houses")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},r),[e._v("New House")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.inputRules.required],label:"Label",dense:""},model:{value:e.editedItem.label,callback:function(t){e.$set(e.editedItem,"label",t)},expression:"editedItem.label"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Type",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.editedItem.type,callback:function(t){e.$set(e.editedItem,"type",t)},expression:"editedItem.type"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.inputRules.required],label:"Address",dense:""},model:{value:e.editedItem.address,callback:function(t){e.$set(e.editedItem,"address",t)},expression:"editedItem.address"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.inputRules.required],label:"City",dense:""},model:{value:e.editedItem.city,callback:function(t){e.$set(e.editedItem,"city",t)},expression:"editedItem.city"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.open(r)}}},[e._v(" "+e._s(e.actions.open)+" ")]),n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editHouse(r)}}},[e._v(" "+e._s(e.actions.edit)+" ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteHouse(r)}}},[e._v(" "+e._s(e.actions.delete)+" ")])]}}])})],1)},at=[],ot={data:function(){return{dialog:!1,search:"",inputRules:{required:function(e){return!!e||"Required."}},headers:[{text:"Label",align:"left",value:"label"},{text:"Type",value:"type"},{text:"Address",value:"address"},{text:"City",value:"city"},{text:"Actions",value:"action",sortable:!1}],customer:{},editedItem:{label:"",owner:"",type:"",address:"",city:""},defaultItem:{label:"",owner:"",type:"",address:"",city:""},actions:{open:"mdi-open-in-app",edit:"mdi-pencil",delete:"mdi-delete"}}},computed:{formTitle:function(){return this.editedItem._id?"Edit House":"New House"}},watch:{dialog:function(e){e||this.close()}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"customerId"in this.$route.params&&this.getCustomer(this.$route.params.customerId);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getCustomer:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.get("customers",t);case 2:this.customer=e.sent,this.customer.numberOfTasks=this.getNumberOf(this.customer.houses,"tasks"),this.customer.numberOfBookings=this.getNumberOf(this.customer.houses,"bookings"),this.customer.totalCost=this.getTotalCost(this.customer.houses);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getNumberOf:function(e,t){return e.reduce((function(e,n){return e+n[t].length}),0)},getTotalCost:function(e){return e.reduce((function(e,t){return e.concat(t.tasks)}),[]).reduce((function(e,t){return e+t.cost}),0)},open:function(e){this.$router.push({name:"house",params:{houseId:e._id}})},editHouse:function(e){this.editedItem=Object.assign({},e),this.dialog=!0},deleteHouse:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ".concat(t.label,"?"))){e.next=3;break}return e.next=3,m.delete("houses",t._id).then((function(){n.getCustomer(n.$route.params.customerId)}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem)}),300)},save:function(){var e=this;this.editedItem._id?(this.editedItem.owner=this.customer,m.update("houses",this.editedItem._id,this.editedItem).then((function(){e.getCustomer(e.$route.params.customerId),e.close()}))):(this.editedItem.owner=this.customer,m.create("houses",this.editedItem).then((function(){e.getCustomer(e.$route.params.customerId),e.close()})))}}},it=ot,ct=Object(k["a"])(it,st,at,!1,null,null,null),ut=ct.exports;b()(ct,{VBtn:ge["a"],VCard:be["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VCol:ce["a"],VContainer:y["a"],VDataTable:Ye["a"],VDialog:_e["a"],VIcon:O["a"],VRow:ue["a"],VSpacer:xe["a"],VTextField:Oe["a"],VToolbar:et["a"],VToolbarTitle:tt["a"]});var lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-data-table",{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.works,search:e.search,"sort-by":"name"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Works List")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},r),[e._v("New Work")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-text-field",{attrs:{label:"Name",rules:[e.inputRules.required],dense:""},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-select",{attrs:{items:["weekly","monthly","yearly","none"],label:"Frequency",rules:[e.inputRules.required],dense:"",outlined:""},model:{value:e.editedItem.frequency,callback:function(t){e.$set(e.editedItem,"frequency",t)},expression:"editedItem.frequency"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Advance (days)",rules:[e.inputRules.required,e.inputRules.minValue],type:"number",dense:""},model:{value:e.editedItem.advance,callback:function(t){e.$set(e.editedItem,"advance",t)},expression:"editedItem.advance"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editWork(r)}}},[e._v(" "+e._s(e.actions.edit)+" ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteWork(r)}}},[e._v(" "+e._s(e.actions.delete)+" ")])]}}])})],1)},dt=[],mt=(n("b0c0"),{data:function(){return{dialog:!1,search:"",inputRules:{required:function(e){return!!e||"Required."},minValue:function(e){return e>=0||"Value must be equal or greater than zero."}},headers:[{text:"Name",value:"name"},{text:"Frequency",value:"frequency"},{text:"Advance",value:"advance"},{text:"Actions",value:"action",sortable:!1}],works:[],editedItem:{name:"",frequency:"",advance:0},defaultItem:{name:"",frequency:"",advance:0},actions:{edit:"mdi-pencil",delete:"mdi-delete"}}},computed:{formTitle:function(){return this.editedItem._id?"Edit Work":"New Work"}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getWorks();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getWorks:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("works");case 2:this.works=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),editWork:function(e){this.editedItem=Object.assign({},e),this.dialog=!0},deleteWork:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ".concat(t.name,"?"))){e.next=3;break}return e.next=3,m.delete("works",t._id).then((function(){n.getWorks()}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem)}),300)},save:function(){var e=this;this.editedItem._id?m.update("works",this.editedItem._id,this.editedItem).then((function(){e.getWorks(),e.close()})):m.create("works",this.editedItem).then((function(){e.getWorks(),e.close()}))}}}),vt=mt,ht=n("b974"),pt=Object(k["a"])(vt,lt,dt,!1,null,null,null),ft=pt.exports;b()(pt,{VBtn:ge["a"],VCard:be["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VCol:ce["a"],VContainer:y["a"],VDataTable:Ye["a"],VDialog:_e["a"],VIcon:O["a"],VRow:ue["a"],VSelect:ht["a"],VSpacer:xe["a"],VTextField:Oe["a"],VToolbar:et["a"],VToolbarTitle:tt["a"]});var kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-data-table",{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.houses,search:e.search,"sort-by":"label"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Houses List")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},r),[e._v("New House")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Label",rules:[e.inputRules.required],dense:""},model:{value:e.editedItem.label,callback:function(t){e.$set(e.editedItem,"label",t)},expression:"editedItem.label"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-select",{attrs:{items:e.owners,"item-text":"lastName",label:"Customer",rules:[e.inputRules.required],dense:"",outlined:"","return-object":""},model:{value:e.editedItem.owner,callback:function(t){e.$set(e.editedItem,"owner",t)},expression:"editedItem.owner"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Type",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.editedItem.type,callback:function(t){e.$set(e.editedItem,"type",t)},expression:"editedItem.type"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{rules:[e.inputRules.required],label:"Address",dense:""},model:{value:e.editedItem.address,callback:function(t){e.$set(e.editedItem,"address",t)},expression:"editedItem.address"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"City",dense:""},model:{value:e.editedItem.city,callback:function(t){e.$set(e.editedItem,"city",t)},expression:"editedItem.city"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.open(r)}}},[e._v(" "+e._s(e.actions.open)+" ")]),n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editHouse(r)}}},[e._v(" "+e._s(e.actions.edit)+" ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteHouse(r)}}},[e._v(" "+e._s(e.actions.delete)+" ")])]}}])})],1)},gt=[],bt={data:function(){return{dialog:!1,search:"",inputRules:{required:function(e){return!!e||"Required."}},headers:[{text:"Label",align:"left",value:"label"},{text:"Owner",value:"owner.lastName"},{text:"Type",value:"type"},{text:"Address",value:"address"},{text:"City",value:"city"},{text:"Actions",value:"action",sortable:!1}],houses:[],owners:[],editedItem:{label:"",owner:"",type:"",address:"",city:""},defaultItem:{label:"",owner:"",type:"",address:"",city:""},actions:{open:"mdi-open-in-app",edit:"mdi-pencil",delete:"mdi-delete"}}},computed:{formTitle:function(){return this.editedItem._id?"Edit House":"New House"}},watch:{dialog:function(e){e||this.close()}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getOwners(),this.getHouses();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getHouses:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("houses");case 2:this.houses=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getOwners:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("customers");case 2:this.owners=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),open:function(e){this.$router.push({name:"house",params:{houseId:e._id}})},editHouse:function(e){this.editedItem=Object.assign({},e),this.dialog=!0},deleteHouse:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ".concat(t.label,"?"))){e.next=3;break}return e.next=3,m.delete("houses",t._id).then((function(){n.getHouses()}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem)}),300)},save:function(){var e=this;this.editedItem._id?m.update("houses",this.editedItem._id,this.editedItem).then((function(){e.getHouses(),e.close()})):m.create("houses",this.editedItem).then((function(){e.getHouses(),e.close()}))}}},wt=bt,yt=Object(k["a"])(wt,kt,gt,!1,null,null,null),_t=yt.exports;b()(yt,{VBtn:ge["a"],VCard:be["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VCol:ce["a"],VContainer:y["a"],VDataTable:Ye["a"],VDialog:_e["a"],VIcon:O["a"],VRow:ue["a"],VSelect:ht["a"],VSpacer:xe["a"],VTextField:Oe["a"],VToolbar:et["a"],VToolbarTitle:tt["a"]});var xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.house.label))]),n("h3",[e._v("Bookings: "+e._s(e.house.bookings&&e.house.bookings.length))]),n("h3",[e._v("Tasks: "+e._s(e.house.tasks&&e.house.tasks.length))]),n("h3",[e._v("Total Cost: "+e._s(e.house.totalCost))]),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-data-table",{staticClass:"elevation-5",attrs:{headers:e.bookingsHeaders,items:e.house.bookings,search:e.searchBooking,"sort-by":"label"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Bookings")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchBooking,callback:function(t){e.searchBooking=t},expression:"searchBooking"}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},r),[e._v("New Booking")])]}}]),model:{value:e.bookingDialog,callback:function(t){e.bookingDialog=t},expression:"bookingDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.bookingFormTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Guest First Name",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.editedBooking.guestFirstName,callback:function(t){e.$set(e.editedBooking,"guestFirstName",t)},expression:"editedBooking.guestFirstName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Guest Last Name",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.editedBooking.guestLastName,callback:function(t){e.$set(e.editedBooking,"guestLastName",t)},expression:"editedBooking.guestLastName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Check-in",rules:[e.inputRules.required],"prepend-icon":"mdi-calendar",readonly:"",dense:""},model:{value:e.editedBooking.checkInDate,callback:function(t){e.$set(e.editedBooking,"checkInDate",t)},expression:"editedBooking.checkInDate"}},r))]}}]),model:{value:e.menuCheckInDate,callback:function(t){e.menuCheckInDate=t},expression:"menuCheckInDate"}},[n("v-date-picker",{on:{input:function(t){e.menuCheckInDate=!1}},model:{value:e.editedBooking.checkInDate,callback:function(t){e.$set(e.editedBooking,"checkInDate",t)},expression:"editedBooking.checkInDate"}})],1)],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Check-out",rules:[e.inputRules.required,e.inputRules.checkOut],"prepend-icon":"mdi-calendar",readonly:"",dense:""},model:{value:e.editedBooking.checkOutDate,callback:function(t){e.$set(e.editedBooking,"checkOutDate",t)},expression:"editedBooking.checkOutDate"}},r))]}}]),model:{value:e.menuCheckOutDate,callback:function(t){e.menuCheckOutDate=t},expression:"menuCheckOutDate"}},[n("v-date-picker",{on:{input:function(t){e.menuCheckOutDate=!1}},model:{value:e.editedBooking.checkOutDate,callback:function(t){e.$set(e.editedBooking,"checkOutDate",t)},expression:"editedBooking.checkOutDate"}})],1)],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeBooking}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveBooking}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.checkInDate",fn:function(t){var r=t.item;return[n("span",[e._v(e._s(e._f("formatDate")(r.checkInDate)))])]}},{key:"item.checkOutDate",fn:function(t){var r=t.item;return[n("span",[e._v(e._s(e._f("formatDate")(r.checkOutDate)))])]}},{key:"item.action",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editBooking(r)}}},[e._v(" "+e._s(e.actions.edit)+" ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteBooking(r)}}},[e._v(" "+e._s(e.actions.delete)+" ")])]}}])})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-data-table",{staticClass:"elevation-5",attrs:{headers:e.tasksHeaders,items:e.house.tasks,search:e.searchTask,"sort-by":"label"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Tasks")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchTask,callback:function(t){e.searchTask=t},expression:"searchTask"}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},r),[e._v("New Task")])]}}]),model:{value:e.taskDialog,callback:function(t){e.taskDialog=t},expression:"taskDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.taskFormTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-select",{attrs:{items:e.works,"item-text":"name",label:"Work to be done",rules:[e.inputRules.required],dense:"",outlined:"","return-object":""},model:{value:e.editedTask.work,callback:function(t){e.$set(e.editedTask,"work",t)},expression:"editedTask.work"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-select",{attrs:{items:[!0,!1],label:"Completed",dense:"",outlined:""},model:{value:e.editedTask.completed,callback:function(t){e.$set(e.editedTask,"completed",t)},expression:"editedTask.completed"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Deadline",rules:[e.inputRules.required],"prepend-icon":"mdi-calendar",readonly:"",dense:""},model:{value:e.editedTask.deadline,callback:function(t){e.$set(e.editedTask,"deadline",t)},expression:"editedTask.deadline"}},r))]}}]),model:{value:e.menuDeadline,callback:function(t){e.menuDeadline=t},expression:"menuDeadline"}},[n("v-date-picker",{on:{input:function(t){e.menu=!1}},model:{value:e.editedTask.deadline,callback:function(t){e.$set(e.editedTask,"deadline",t)},expression:"editedTask.deadline"}})],1)],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{type:"number",rules:[e.inputRules.required,e.inputRules.minValue],label:"Cost",dense:""},model:{value:e.editedTask.cost,callback:function(t){e.$set(e.editedTask,"cost",t)},expression:"editedTask.cost"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeTask}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.saveTask}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.deadline",fn:function(t){var r=t.item;return[n("span",[e._v(e._s(e._f("formatDate")(r.deadline)))])]}},{key:"item.action",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editTask(r)}}},[e._v(" "+e._s(e.actions.edit)+" ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteTask(r)}}},[e._v(" "+e._s(e.actions.delete)+" ")])]}}])})],1)],1)],1)},Ot=[],Ct={data:function(){var e=this;return{house:{},bookingDialog:!1,menuCheckInDate:!1,menuCheckOutDate:!1,menuDeadline:!1,searchBooking:"",searchTask:"",inputRules:{required:function(e){return!!e||"Required."},minValue:function(e){return e>=0||"Value must be equal or greater than zero."},checkOut:function(t){return e.validateCheckout(t)||"Check-out must be later than check-in."}},bookingsHeaders:[{text:"Guest First Name",value:"guestFirstName"},{text:"Guest Last Name",value:"guestLastName"},{text:"Check-in",value:"checkInDate"},{text:"Check-out",value:"checkOutDate"},{text:"Actions",value:"action",sortable:!1}],editedBooking:{house:"",guestFirstName:"",guestLastName:"",checkInDate:"",checkOutDate:""},defaultBooking:{house:"",guestFirstName:"",guestLastName:"",checkInDate:"",checkOutDate:""},taskDialog:!1,tasksHeaders:[{text:"Work",value:"work.name"},{text:"Cost",value:"cost"},{text:"Deadline",value:"deadline"},{text:"Completed",value:"completed"},{text:"Actions",value:"action",sortable:!1}],works:[],editedTask:{house:"",work:"",cost:0,deadline:"",completed:!1},defaultTask:{house:"",work:"",cost:0,deadline:"",completed:!1},actions:{edit:"mdi-pencil",delete:"mdi-delete"}}},computed:{bookingFormTitle:function(){return this.editedBooking._id?"Edit Booking":"New Booking"},taskFormTitle:function(){return this.editedTask._id?"Edit Task":"New Task"}},watch:{bookingDialog:function(e){e||this.closeBooking()},taskDialog:function(e){e||this.closeTask()}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.getWorks(),!("houseId"in this.$route.params)){e.next=4;break}return e.next=4,this.getHouse(this.$route.params.houseId);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getHouse:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.get("houses",t);case 2:this.house=e.sent,this.house.totalCost=this.getTotalCost(this.house.tasks);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getTotalCost:function(e){return e.reduce((function(e,t){return e+t.cost}),0)},editBooking:function(e){this.editedBooking=Object.assign({},e,{checkInDate:new Date(e.checkInDate).toISOString().substr(0,10)},{checkOutDate:new Date(e.checkOutDate).toISOString().substr(0,10)}),this.bookingDialog=!0},deleteBooking:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ".concat(t._id,"?"))){e.next=3;break}return e.next=3,m.delete("bookings",t._id).then((function(){n.getHouse(n.$route.params.houseId)}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),closeBooking:function(){var e=this;this.bookingDialog=!1,setTimeout((function(){e.editedBooking=Object.assign({},e.defaultBooking)}),300)},saveBooking:function(){var e=this;this.editedBooking._id?(this.editedBooking.house=this.house,m.update("bookings",this.editedBooking._id,this.editedBooking).then((function(){e.getHouse(e.$route.params.houseId),e.closeBooking()}))):(this.editedBooking.house=this.house,m.create("bookings",this.editedBooking).then((function(){e.getHouse(e.$route.params.houseId),e.closeBooking()})))},getWorks:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("works");case 2:this.works=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),editTask:function(e){this.editedTask=Object.assign({},e,{deadline:new Date(e.deadline).toISOString().substr(0,10)}),this.taskDialog=!0},deleteTask:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ".concat(t._id,"?"))){e.next=3;break}return e.next=3,m.delete("tasks",t._id).then((function(){n.getHouse(n.$route.params.houseId)}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),closeTask:function(){var e=this;this.taskDialog=!1,setTimeout((function(){e.editedTask=Object.assign({},e.defaultTask)}),300)},saveTask:function(){var e=this;this.editedTask._id?(this.editedTask.house=this.house,m.update("tasks",this.editedTask._id,this.editedTask).then((function(){e.getHouse(e.$route.params.houseId),e.closeTask()}))):(this.editedTask.house=this.house,m.create("tasks",this.editedTask).then((function(){e.getHouse(e.$route.params.houseId),e.closeTask()})))},validateCheckout:function(e){return new Date(e).toDateString()>=new Date(this.editedItem.checkInDate).toDateString()}}},It=Ct,Dt=n("2e4b"),Rt=n("e449"),jt=Object(k["a"])(It,xt,Ot,!1,null,null,null),Tt=jt.exports;b()(jt,{VBtn:ge["a"],VCard:be["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VCol:ce["a"],VContainer:y["a"],VDataTable:Ye["a"],VDatePicker:Dt["a"],VDialog:_e["a"],VIcon:O["a"],VMenu:Rt["a"],VRow:ue["a"],VSelect:ht["a"],VSpacer:xe["a"],VTextField:Oe["a"],VToolbar:et["a"],VToolbarTitle:tt["a"]});var Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-data-table",{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.bookings,search:e.search,"sort-by":"checkInDate"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Bookings List")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},r),[e._v("New Booking")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Guest First Name",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.editedItem.guestFirstName,callback:function(t){e.$set(e.editedItem,"guestFirstName",t)},expression:"editedItem.guestFirstName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Guest Last Name",rules:[e.inputRules.required],dense:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}},model:{value:e.editedItem.guestLastName,callback:function(t){e.$set(e.editedItem,"guestLastName",t)},expression:"editedItem.guestLastName"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-select",{attrs:{items:e.houses,"item-text":"label",label:"House",rules:[e.inputRules.required],dense:"",outlined:"","return-object":""},model:{value:e.editedItem.house,callback:function(t){e.$set(e.editedItem,"house",t)},expression:"editedItem.house"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Check-in",rules:[e.inputRules.required],"prepend-icon":"mdi-calendar",readonly:"",dense:""},model:{value:e.editedItem.checkInDate,callback:function(t){e.$set(e.editedItem,"checkInDate",t)},expression:"editedItem.checkInDate"}},r))]}}]),model:{value:e.menuCheckInDate,callback:function(t){e.menuCheckInDate=t},expression:"menuCheckInDate"}},[n("v-date-picker",{on:{input:function(t){e.menuCheckInDate=!1}},model:{value:e.editedItem.checkInDate,callback:function(t){e.$set(e.editedItem,"checkInDate",t)},expression:"editedItem.checkInDate"}})],1)],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Check-out",rules:[e.inputRules.required,e.inputRules.checkOut],"prepend-icon":"mdi-calendar",readonly:"",dense:""},model:{value:e.editedItem.checkOutDate,callback:function(t){e.$set(e.editedItem,"checkOutDate",t)},expression:"editedItem.checkOutDate"}},r))]}}]),model:{value:e.menuCheckOutDate,callback:function(t){e.menuCheckOutDate=t},expression:"menuCheckOutDate"}},[n("v-date-picker",{on:{input:function(t){e.menuCheckOutDate=!1}},model:{value:e.editedItem.checkOutDate,callback:function(t){e.$set(e.editedItem,"checkOutDate",t)},expression:"editedItem.checkOutDate"}})],1)],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.checkInDate",fn:function(t){var r=t.item;return[n("span",[e._v(e._s(e._f("formatDate")(r.checkInDate)))])]}},{key:"item.checkOutDate",fn:function(t){var r=t.item;return[n("span",[e._v(e._s(e._f("formatDate")(r.checkOutDate)))])]}},{key:"item.action",fn:function(t){var r=t.item;return[r.checkInCompleted?e._e():n("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"red"},on:{click:function(t){return e.checkInBooking(r)}}},[e._v(" "+e._s(e.actions.checkIn)+" ")]),r.checkInCompleted?n("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"green"},on:{click:function(t){return e.uncheckInBooking(r)}}},[e._v(" "+e._s(e.actions.checkIn)+" ")]):e._e(),r.checkOutCompleted?e._e():n("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"red"},on:{click:function(t){return e.checkOutBooking(r)}}},[e._v(" "+e._s(e.actions.checkOut)+" ")]),r.checkOutCompleted?n("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"green"},on:{click:function(t){return e.uncheckOutBooking(r)}}},[e._v(" "+e._s(e.actions.checkOut)+" ")]):e._e(),n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editBooking(r)}}},[e._v(" "+e._s(e.actions.edit)+" ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteBooking(r)}}},[e._v(" "+e._s(e.actions.delete)+" ")])]}}])})],1)},St=[];function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pt={data:function(){var e=this;return{dialog:!1,search:"",inputRules:{required:function(e){return!!e||"Required."},checkOut:function(t){return e.validateCheckout(t)||"Check-out must be later than check-in."}},menuCheckInDate:!1,menuCheckOutDate:!1,headers:[{text:"House",value:"house.label"},{text:"Guest First Name",value:"guestFirstName"},{text:"Guest Last Name",value:"guestLastName"},{text:"Check-in",value:"checkInDate"},{text:"Check-out",value:"checkOutDate"},{text:"Actions",value:"action",sortable:!1}],houses:[],bookings:[],editedItem:{house:"",guestFirstName:"",guestLastName:"",checkInDate:"",checkOutDate:""},defaultItem:{house:"",guestFirstName:"",guestLastName:"",checkInDate:"",checkOutDate:""},actions:{checkIn:"mdi-home-import-outline",checkOut:"mdi-home-export-outline",edit:"mdi-pencil",delete:"mdi-delete"}}},computed:Bt({formTitle:function(){return this.editedItem._id?"Edit Booking":"New Booking"}},Object(c["c"])(["user"])),watch:{dialog:function(e){e||this.close()}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getHouses(),this.getBookings();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getHouses:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("houses");case 2:this.houses=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getBookings:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("bookings");case 2:this.bookings=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),editBooking:function(e){this.editedItem=Object.assign({},e,{checkInDate:new Date(e.checkInDate).toISOString().substr(0,10)},{checkOutDate:new Date(e.checkOutDate).toISOString().substr(0,10)}),this.dialog=!0},checkInBooking:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Object.assign({},t,{checkInCompleted:!0},{checkInBy:this.user._id}),m.update("bookings",n._id,n).then((function(){r.getBookings()}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uncheckInBooking:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Object.assign({},t,{checkInCompleted:!1},{checkInBy:""}),m.update("bookings",n._id,n).then((function(){r.getBookings()}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),checkOutBooking:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Object.assign({},t,{checkOutCompleted:!0},{checkOutBy:this.user._id}),m.update("bookings",n._id,n).then((function(){r.getBookings()}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uncheckOutBooking:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Object.assign({},t,{checkOutCompleted:!1},{checkOutBy:this.user._id}),m.update("bookings",n._id,n).then((function(){r.getBookings()}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deleteBooking:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ".concat(t._id,"?"))){e.next=3;break}return e.next=3,m.delete("bookings",t._id).then((function(){n.getBookings()}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem)}),300)},save:function(){var e=this;this.editedItem._id?m.update("bookings",this.editedItem._id,this.editedItem).then((function(){e.getBookings(),e.close()})):m.create("bookings",this.editedItem).then((function(){e.getBookings(),e.close()}))},validateCheckout:function(e){return new Date(e).toDateString()>=new Date(this.editedItem.checkInDate).toDateString()}}},At=Pt,qt=Object(k["a"])(At,Vt,St,!1,null,null,null),$t=qt.exports;b()(qt,{VBtn:ge["a"],VCard:be["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VCol:ce["a"],VContainer:y["a"],VDataTable:Ye["a"],VDatePicker:Dt["a"],VDialog:_e["a"],VIcon:O["a"],VMenu:Rt["a"],VRow:ue["a"],VSelect:ht["a"],VSpacer:xe["a"],VTextField:Oe["a"],VToolbar:et["a"],VToolbarTitle:tt["a"]});var Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-data-table",{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.tasks,search:e.search,"sort-by":"deadline"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Tasks List")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},r),[e._v("New Task")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-select",{attrs:{items:e.houses,"item-text":"label",label:"House",rules:[e.inputRules.required],dense:"",outlined:"","return-object":""},model:{value:e.editedItem.house,callback:function(t){e.$set(e.editedItem,"house",t)},expression:"editedItem.house"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[n("v-select",{attrs:{items:e.works,"item-text":"name",label:"Work to be done",rules:[e.inputRules.required],dense:"",outlined:"","return-object":""},model:{value:e.editedItem.work,callback:function(t){e.$set(e.editedItem,"work",t)},expression:"editedItem.work"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{type:"number",label:"Cost",rules:[e.inputRules.required,e.inputRules.minValue],dense:""},model:{value:e.editedItem.cost,callback:function(t){e.$set(e.editedItem,"cost",t)},expression:"editedItem.cost"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Deadline",rules:[e.inputRules.required],"prepend-icon":"mdi-calendar",readonly:"",dense:""},model:{value:e.editedItem.deadline,callback:function(t){e.$set(e.editedItem,"deadline",t)},expression:"editedItem.deadline"}},r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-date-picker",{on:{input:function(t){e.menu=!1}},model:{value:e.editedItem.deadline,callback:function(t){e.$set(e.editedItem,"deadline",t)},expression:"editedItem.deadline"}})],1)],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-select",{attrs:{items:[!0,!1],label:"Completed",dense:"",outlined:""},model:{value:e.editedItem.completed,callback:function(t){e.$set(e.editedItem,"completed",t)},expression:"editedItem.completed"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.saveTask(e.editedItem)}}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.deadline",fn:function(t){var r=t.item;return[n("span",[e._v(e._s(e._f("formatDate")(r.deadline)))])]}},{key:"item.action",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editTask(r)}}},[e._v(" "+e._s(e.actions.edit)+" ")]),n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.deleteTask(r)}}},[e._v(" "+e._s(e.actions.delete)+" ")]),r.completed?e._e():n("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"red"},on:{click:function(t){return e.completeTask(r)}}},[e._v(" "+e._s(e.actions.check)+" ")]),r.completed?n("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"green"},on:{click:function(t){return e.uncompleteTask(r)}}},[e._v(" "+e._s(e.actions.uncheck)+" ")]):e._e()]}}])})],1)},Ht=[];function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ut={data:function(){return{menu:!1,dialog:!1,search:"",inputRules:{required:function(e){return!!e||"Required."},minValue:function(e){return e>=0||"Value must be equal or greater than zero."}},headers:[{text:"House",value:"house.label"},{text:"Work",value:"work.name"},{text:"Cost",value:"cost"},{text:"Deadline",value:"deadline"},{text:"Completed",value:"completed"},{text:"Actions",value:"action",sortable:!1}],houses:[],works:[],tasks:[],editedItem:{house:"",work:"",cost:0,deadline:"",completed:!1},defaultItem:{house:"",work:"",cost:0,deadline:"",completed:!1},actions:{edit:"mdi-pencil",delete:"mdi-delete",check:"mdi-check-bold",uncheck:"mdi-check-bold"}}},computed:Ft({formTitle:function(){return this.editedItem._id?"Edit Task":"New Task"}},Object(c["c"])(["user"])),watch:{dialog:function(e){e||this.close()}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getHouses(),this.getWorks(),this.getTasks();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getHouses:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("houses");case 2:this.houses=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getWorks:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("works");case 2:this.works=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getTasks:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getAll("tasks");case 2:this.tasks=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),editTask:function(e){this.editedItem=Object.assign({},e,{deadline:new Date(e.deadline).toISOString().substr(0,10)}),this.dialog=!0},deleteTask:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ".concat(t._id,"?"))){e.next=3;break}return e.next=3,m.delete("tasks",t._id).then((function(){n.getTasks()}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),completeTask:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.completed=!0,t.completedBy=this.user._id,this.saveTask(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uncompleteTask:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.completed=!1,t.completedBy="",this.saveTask(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem)}),300)},saveTask:function(e){var t=this;e._id?m.update("tasks",e._id,e).then((function(){t.getTasks(),t.close()})):m.create("tasks",e).then((function(){t.getTasks(),t.close()}))}}},Mt=Ut,zt=Object(k["a"])(Mt,Lt,Ht,!1,null,null,null),Wt=zt.exports;b()(zt,{VBtn:ge["a"],VCard:be["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VCol:ce["a"],VContainer:y["a"],VDataTable:Ye["a"],VDatePicker:Dt["a"],VDialog:_e["a"],VIcon:O["a"],VMenu:Rt["a"],VRow:ue["a"],VSelect:ht["a"],VSpacer:xe["a"],VTextField:Oe["a"],VToolbar:et["a"],VToolbarTitle:tt["a"]});var Gt={token:localStorage.getItem("token")||"",user:{},status:""},Zt={isLoggedIn:function(e){return!!e.token},authState:function(e){return e.status},user:function(e){return e.user}},Jt={login:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,r("auth_request"),e.next=4,m.login(n);case 4:return s=e.sent,s.success&&(a=s.token,o=s.user,localStorage.setItem("token",a),l.a.defaults.headers.common["Authorization"]=a,r("auth_success",{token:a,user:o})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),register:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,r("register_request"),s=m.register(n),void 0!==s.success&&r("register_success"),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,localStorage.removeItem("token");case 3:return n("logout"),delete l.a.defaults.headers.common["Authorization"],tn.push("/login"),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},Kt={auth_request:function(e){e.status="loading"},auth_success:function(e,t){var n=t.token,r=t.user;e.token=n,e.user=r,e.status="success"},register_request:function(e){e.status="loading"},register_success:function(e){e.status="success"},logout:function(e){e.status="",e.token="",e.user=""}},Qt={state:Gt,getters:Zt,actions:Jt,mutations:Kt};r["default"].use(c["a"]);var Xt=new c["a"].Store({modules:{Auth:Qt},state:{},mutations:{},actions:{}});r["default"].use(N["a"]);var Yt=[{path:"/about",name:"about",component:Ze,meta:{requiresGuest:!0}},{path:"/register",name:"register",component:Fe,meta:{requiresGuest:!0}},{path:"/login",name:"login",component:Be,meta:{requiresGuest:!0}},{path:"/",name:"home",component:me,meta:{requiresAuth:!0}},{path:"/user-profile",name:"userProfile",component:Ie,meta:{requiresAuth:!0}},{path:"/customers-list",name:"customersList",component:rt,meta:{requiresAuth:!0}},{path:"/customers/:customerId",name:"customer",component:ut,meta:{requiresAuth:!0}},{path:"/works-list",name:"worksList",component:ft,meta:{requiresAuth:!0}},{path:"/houses-list",name:"housesList",component:_t,meta:{requiresAuth:!0}},{path:"/houses/:houseId",name:"house",component:Tt,meta:{requiresAuth:!0}},{path:"/bookings-list",name:"bookingsList",component:$t,meta:{requiresAuth:!0}},{path:"/tasks-list",name:"tasksList",component:Wt,meta:{requiresAuth:!0}}],en=new N["a"]({mode:"history",routes:Yt});en.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.requiresAuth}))?Xt.getters.isLoggedIn?n():n("/login"):e.matched.some((function(e){return e.meta.requiresGuest}))&&(Xt.getters.isLoggedIn?n("/home"):n())}));var tn=en,nn=n("ce5b"),rn=n.n(nn);r["default"].use(rn.a);var sn=new rn.a({});n("bf40");r["default"].config.productionTip=!1,r["default"].prototype.$http=l.a;var an=localStorage.getItem("token");an&&(r["default"].prototype.$http.defaults.headers.common["Authorization"]=an),r["default"].filter("formatDate",(function(e){if(e)return new Date(e).toISOString().substr(0,10)})),new r["default"]({router:tn,store:Xt,vuetify:sn,render:function(e){return e(S)}}).$mount("#app")},cccb:function(e,t,n){"use strict";var r=n("4230"),s=n.n(r);s.a}});
//# sourceMappingURL=app.42531b4b.js.map